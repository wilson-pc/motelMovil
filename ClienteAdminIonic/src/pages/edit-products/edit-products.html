<ion-header>
  
  <ion-navbar>
    <ion-toolbar>
      <ion-title>Editar Producto</ion-title>
      <ion-buttons start>
        <button ion-button (click)="dismissModal()">
          <span ion-text color="primary" showWhen="ios">Cancelar</span>
        </button>
      </ion-buttons>
    </ion-toolbar>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <ion-list>

    <form [formGroup]="productForm">

      <ion-item no-lines>
        <ion-title>Negocio: "{{commerceOnly.nombre}}"</ion-title>
        <ion-title>Tipo: "{{commerceOnly.tipo.nombre}}"</ion-title>
        <br>
      </ion-item>

      <ion-row (click)="filechoosser()">
        <ion-col col-6>
          <ion-label>Foto:</ion-label>
        </ion-col>
        <ion-col col-6>
          <input type="file" accept="image/*" name="fileInput" (change)="fileChange($event)" #fileInput class="input-file"
            style="position:absolute; top: -999999px">
          <ion-input type="text" [(ngModel)]="nombreimagen" formControlName="productImg" disabled="true"></ion-input>
        </ion-col>
      </ion-row>

      <ion-item>
        <ion-label floating>Nombre:</ion-label>
        <ion-input [(ngModel)]="productOnly.nombre" formControlName="productNombre" name="nombre" type="text"></ion-input>
      </ion-item>
      <!--alert-->
      <ion-item no-lines *ngIf="!productForm.controls.productNombre.valid  && (productForm.controls.productNombre.dirty || statusInput)">
        <p>Campo nombre inválido, 1 - 40 caracteres.</p>
      </ion-item>

      <ion-row>
        <ion-col col-10>
          <ion-item>
            <ion-label floating>Tipo producto: </ion-label>
            <ion-select [(ngModel)]="productOnly.tipo.tipo" formControlName="productTipo" okText="Aceptar" cancelText="Cancelar">
              <ion-option *ngFor="let type of listTypeProduct" value="{{type.tipo}}">{{type.tipo}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <ion-col col-2>
          <br>
          <ion-buttons start>
            <button ion-button icon-only (click)="addTypeProduct()">
              <ion-icon name="add"></ion-icon>
            </button>
          </ion-buttons>
        </ion-col>
      </ion-row>
      <!--alert-->
      <ion-item no-lines *ngIf="!productForm.controls.productTipo.valid  && (productForm.controls.productTipo.dirty || statusInput)">
        <p>Campo tipo producto inválido: seleccione un tipo.</p>
      </ion-item>

      <ion-item>
        <ion-label floating>Precio (BOB):</ion-label>
        <ion-input [(ngModel)]="productOnly.precio" formControlName="productPrecio" name="precio" type="number"></ion-input>
      </ion-item>
      <!--alert-->
      <ion-item no-lines *ngIf="!productForm.controls.productPrecio.valid  && (productForm.controls.productPrecio.dirty || statusInput)">
        <p>Campo precio inválido; máximo 4 cifras.</p>
      </ion-item>

      <ion-item>
        <ion-label floating>Cantidad:</ion-label>
        <ion-input [(ngModel)]="productOnly.cantidad" formControlName="productCantidad" name="cantidad" type="number"></ion-input>
      </ion-item>
      <!--alert-->
      <ion-item no-lines *ngIf="!productForm.controls.productCantidad.valid  && (productForm.controls.productCantidad.dirty || statusInput)">
        <p>Campo cantidad inválido; máximo 3 cifras.</p>
      </ion-item>

      <ion-item>
        <ion-label floating>Descripcion:</ion-label>
        <ion-input [(ngModel)]="productOnly.descripcion" formControlName="productDescripcion" name="descripcion" type="text"></ion-input>
      </ion-item>
      <!--alert-->
      <ion-item no-lines *ngIf="!productForm.controls.productDescripcion.valid  && (productForm.controls.productDescripcion.dirty || statusInput)">
        <p>Campo descripción inválido; caracteres (10 - 90).</p>
      </ion-item>

      <br><br>
      <ion-buttons>
        <button ion-button block color="secondary" (click)="updateProduct()">
          Actualizar
        </button>
      </ion-buttons>

    </form>

  </ion-list>

</ion-content>